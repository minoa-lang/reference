# Derive attributes

The derive attributes are used by the compiler to allow the automatic implemenation of given traits.

## `derive` [↵](#derive-attributes)

The `derive` attribute tells the compiler to implement a given trait on the fragment it is applied to.
It may be provided with multiple paths, which will cause all these trait to be implemented.

This attribute is handled using [`derive` meta-attributes].

> _Example_
> ```
> @derive(Clone, Copy)
> struct Foo {
>     a: i32,
>     b: i32
> }
> ```
> 
> This would result in the following implemenations:
> ```
> struct Foo {
>     a: i32,
>     b: i32,
> 
>     impl as Clone {
>         fn(&self) clone() -> Self {
>             Self {
>                 a: self.a.clone(),
>                 b: self.b.clone(),
>             }
>         }
>     }
> 
>     impl as Copy {}
> }
> ```

In addition, it is possible to pass additional info to the meta-attribute which does the actual implemenation, by providing it between parentheses after the name of the trait.

> _Example_
> ```
> @derive(Bar(baz = 1))
> struct Foo {}
> ```

## `auto_derive` [↵](#derive-attributes)

The `auto_derive` attribute is automatically added to any implementations generated by the `derive` attribute.
This attribute has no effect, but allows for tools and lints to detect that the implemenation is automatically generated.

Only the compiler is allowed to add this attribute to any implemenation.

> _Example_
> 
> The full representation of the above `@derive(Clone, Copy), would, to be fully correct, be the following
> ```
> struct Foo {
>     a: i32,
>     b: i32,
> 
>     @auto_derive
>     impl as Clone {
>         fn(&self) clone() -> Self {
>             Self {
>                 a: self.a.clone(),
>                 b: self.b.clone(),
>             }
>         }
>     }
> 
>     @auto_derive
>     impl as Copy {}
> }
> ```


[`derive` meta-attributes]: ../metaprogramming.md#attribute-roles-